<%
  addon = @item.addons.select { |item| item.klass == Cms::Addon::Line::Richmenu::Area }.first
  crop_partial_path = "#{addon.path}/crop"

  addon_options = {}
  css_classes ||= []
  css_classes = Array(css_classes).flatten.compact
%>
<%= form_for :item, url: { action: :crop }, html: { id: "item-form", method: :put, multipart: true, autocomplete: :off } do |f| %>
<%= error_messages_for :item %>

<%= hidden_field_tag :_updated, params[:_updated] || @item.updated if @item.respond_to?(:updated) %>

<div class="addon-views">
  <% addon_options = { id: "addon-#{addon.id}", head: addon.name, class: css_classes.dup, toggle: true } %>
  <% buf = render crop_partial_path, f: f, addon: addon_options %>
  <%= render "ss/crud/addon", addon: addon_options do %>
    <%= buf %>
  <% end %>
</div>

<footer class="send">
  <%= f.submit t("ss.buttons.save"), class: 'btn-primary save', data: { disable_with: t("ss.buttons.saving") } %>
  <%= f.button t("ss.buttons.cancel"), class: 'btn-default', type: :reset, onclick: "location.href='#{url_for(action: :show)}'; return false;" %>
</footer>

<% end %>

<%= jquery do %> SS.confirmUnloading(); <% end %>
