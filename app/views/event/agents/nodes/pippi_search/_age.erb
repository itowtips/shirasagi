<%= jquery do %>

  $(".reset").on("click", function () {
    $(".prop").prop("checked", false);
    $(".keyword").val("");
    return false;
  });

<% end %>

<%= form_tag search_path, multipart: true, method: "get" do %>
  <%= hidden_field_tag :search_keyword, @keyword, class: "keyword" %>
  <%= hidden_field_tag 'location_id', @location_id %>
  <%= hidden_field_tag 'facility_id', @facility_id %>

  <% @genres.each do |genre| %>
    <%= hidden_field_tag 'genre_ids[]', genre.id %>
  <% end %>

  <fieldset class="age">
    <legend><%= "子どもの年齢から探す" %></legend>
    <% @event_node.st_ages.site(@cur_site).and_public.each do |age| %>
      <label for=<%= "q_age_ids_#{age.id}" %>>
        <%= check_box_tag 'age_ids[]', age.id, @age_ids.include?(age.id) ? {checked: true} : nil,
                          { id: "q_age_ids_#{age.id}", class: "prop"} %>
        <%= age.name %>
      </label>
    <% end %>
  </fieldset>

  <footer class="send">
    <%= submit_tag "リセット", name: nil, class: :reset %>
    <%= submit_tag "検索する", name: nil %>
  </footer>
<% end %>
