<%
  addon ||= local_assigns.fetch(:addon, {})
  addon[:display_body] = "hide"
%>

<% render_menu_setting = proc do |type, fallback_label| %>
  <dl class="see addon-gws-system-menu-setting">
    <dt><%= @model.t("menu_#{type}_state") %></dt>
    <dd>
      <% if @item.send("menu_#{type}_visible?") %>
        <% if I18n.available_locales.length == 1 %>
          <%= @item.send("menu_#{type}_label") || tryb { fallback_label[I18n.default_locale].presence } || t("modules.gws/#{type}") %>
        <% else %>
          <% translations = @item.send("menu_#{type}_label_translations") %>
          <% I18n.default_locale.tap do |lang| %>
            <span class="menu-label menu-label-<%= lang %>"><%= tryb { translations[lang].presence } || tryb { fallback_label[lang] } || t("modules.gws/#{type}", locale: lang) %></span>
          <% end %>
          <% I18n.available_locales.reject { |lang| lang == I18n.default_locale }.each do |lang| %>
            <span class="menu-label menu-label-<%= lang %>"><%= tryb { translations[lang].presence } || tryb { fallback_label[lang] } || t("modules.gws/#{type}", locale: lang) %></span>
          <% end %>
        <% end %>
      <% else %>
        <%= @item.label("menu_#{type}_state") %>
      <% end %>
    </dd>
  </dl>
<% end %>

<% render_menu_setting.call(:portal, I18n.available_locales.index_with { |lang| t('modules.gws/portal', locale: lang) }) %>
<% render_menu_setting.call(:notice) %>
<% render_menu_setting.call(:schedule) %>
<% render_menu_setting.call(:todo, I18n.available_locales.index_with { |lang| t('mongoid.models.gws/schedule/todo', locale: lang) }) %>
<% render_menu_setting.call(:reminder, I18n.available_locales.index_with { |lang| t('mongoid.models.gws/reminder', locale: lang) }) %>
<% render_menu_setting.call(:presence, I18n.available_locales.index_with { |lang| t('mongoid.models.gws/presence', locale: lang) }) %>
<% render_menu_setting.call(:attendance) %>
<% render_menu_setting.call(:bookmark) %>
<% render_menu_setting.call(:memo) %>
<% render_menu_setting.call(:report) %>
<% render_menu_setting.call(:workflow) %>
<% render_menu_setting.call(:circular) %>
<% render_menu_setting.call(:monitor) %>
<% render_menu_setting.call(:survey) %>
<% render_menu_setting.call(:board) %>
<% render_menu_setting.call(:faq) %>
<% render_menu_setting.call(:qna) %>
<% render_menu_setting.call(:discussion) %>
<% render_menu_setting.call(:share) %>
<% render_menu_setting.call(:shared_address) %>
<% render_menu_setting.call(:personal_address) %>
<% render_menu_setting.call(:staff_record, I18n.available_locales.index_with { |lang| t('gws/staff_record.staff_records', locale: lang) }) %>
<% render_menu_setting.call(:links, I18n.available_locales.index_with { |lang| t('mongoid.models.gws/link', locale: lang) }) %>
<% render_menu_setting.call(:contrast, I18n.available_locales.index_with { |lang| t('mongoid.models.gws/contrast', locale: lang) }) %>
<% render_menu_setting.call(:elasticsearch) %>
