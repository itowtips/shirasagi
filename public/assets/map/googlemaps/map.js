(function(){this.Googlemaps_Map=function(){function s(){}return s.map=null,s.form=null,s.center=[36.204824,138.252924],s.zoom=5,s.markers=null,s.openedInfo=null,s.resized=null,s.attachMessage=function(e){return google.maps.event.addListener(s.markers[e].marker,"click",function(){return s.openedInfo&&s.openedInfo.close(),s.markers[e].window&&s.markers[e].window.open(s.markers[e].marker.getMap(),s.markers[e].marker),s.openedInfo=s.markers[e].window}),google.maps.event.addListener(s.markers[e].window,"closeclick",function(){return s.openedInfo=null})},s.setForm=function(e){return this.form=e},s.load=function(e){var o;o={center:new google.maps.LatLng(this.center[0],this.center[1]),zoom:this.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE},mapTypeControl:!0,scaleControl:!0,scrollwheel:!0,streetViewControl:!0,overviewMapControl:!0,overviewMapControlOptions:{opened:!0}},this.map=new google.maps.Map($(e).get(0),o)},s.resize=function(){return google.maps.event.trigger(this.map,"resize"),this.resized||(this.map.setCenter(new google.maps.LatLng(this.center[0],this.center[1])),this.form&&this.form.renderMarkers()),this.resized=!0},s.renderMarkers=function(){if(this.form)return this.form.renderMarkers()},s.renderEvents=function(){if(this.form)return this.form.renderEvents()},s.setMarkers=function(e){var a,o;s.markers=e,a=new google.maps.LatLngBounds,$.each(s.markers,function(e,o){var n,r,t;o.image?s.markers[e].marker=new google.maps.Marker({position:new google.maps.LatLng(o.loc[0],o.loc[1]),icon:o.image,map:s.map}):s.markers[e].marker=new google.maps.Marker({position:new google.maps.LatLng(o.loc[0],o.loc[1]),map:s.map}),a.extend(new google.maps.LatLng(o.loc[0],o.loc[1])),o.html?(n=o.html,s.markers[e].window=new google.maps.InfoWindow({content:n}),s.attachMessage(e)):(o.name||o.text)&&(r=o.name,t=o.text,n='<div class="marker-info">',r&&""!==r&&(n+="<p>"+r+"</p>",t&&""!==t&&$.each(t.split(/[\r\n]+/),function(){return this.match(/^https?:\/\//)?n+='<p><a href="'+this+'">'+this+"</a></p>":n+="<p>"+this+"</p>"})),n+="</div>",s.markers[e].window=new google.maps.InfoWindow({content:n}),s.attachMessage(e))}),$.isEmptyObject(s.markers)||(o=google.maps.event.addListener(s.map,"bounds_changed",function(){return 13<this.getZoom()&&!0===this.initialZoom&&(this.setZoom(13),this.initialZoom=!1),google.maps.event.removeListener(o)}),s.map.initialZoom=!0,s.map.fitBounds(a))},s}()}).call(this);